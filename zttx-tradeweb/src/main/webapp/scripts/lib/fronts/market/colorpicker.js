!function($){var a=function(){var a=65,b='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',c={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},d=function(a,b){var c=K(a);$(b).data("colorpicker").fields.eq(1).val(c.r).end().eq(2).val(c.g).end().eq(3).val(c.b).end()},e=function(a,b){$(b).data("colorpicker").fields.eq(4).val(a.h).end().eq(5).val(a.s).end().eq(6).val(a.b).end()},f=function(a,b){$(b).data("colorpicker").fields.eq(0).val(M(a)).end()},g=function(a,b){$(b).data("colorpicker").selector.css("backgroundColor","#"+M({h:a.h,s:100,b:100})),$(b).data("colorpicker").selectorIndic.css({left:parseInt(150*a.s/100,10),top:parseInt(150*(100-a.b)/100,10)})},h=function(a,b){$(b).data("colorpicker").hue.css("top",parseInt(150-150*a.h/360,10))},i=function(a,b){$(b).data("colorpicker").currentColor.css("backgroundColor","#"+M(a))},j=function(a,b){$(b).data("colorpicker").newColor.css("backgroundColor","#"+M(a))},k=function(b){var c=b.charCode||b.keyCode||-1;if(c>a&&90>=c||32==c)return!1;var d=$(this).parent().parent();d.data("colorpicker").livePreview===!0&&l.apply(this)},l=function(a){var b,c=$(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?c.data("colorpicker").color=b=I(G(this.value)):this.parentNode.className.indexOf("_hsb")>0?c.data("colorpicker").color=b=E({h:parseInt(c.data("colorpicker").fields.eq(4).val(),10),s:parseInt(c.data("colorpicker").fields.eq(5).val(),10),b:parseInt(c.data("colorpicker").fields.eq(6).val(),10)}):c.data("colorpicker").color=b=J(F({r:parseInt(c.data("colorpicker").fields.eq(1).val(),10),g:parseInt(c.data("colorpicker").fields.eq(2).val(),10),b:parseInt(c.data("colorpicker").fields.eq(3).val(),10)})),a&&(d(b,c.get(0)),f(b,c.get(0)),e(b,c.get(0))),g(b,c.get(0)),h(b,c.get(0)),j(b,c.get(0)),c.data("colorpicker").onChange.apply(c,[b,M(b),K(b)])},m=function(a){var b=$(this).parent().parent();b.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},n=function(){a=this.parentNode.className.indexOf("_hex")>0?70:65,$(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),$(this).parent().addClass("colorpicker_focus")},o=function(a){var b=$(this).parent().find("input").focus(),c={el:$(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:a.pageY,field:b,val:parseInt(b.val(),10),preview:$(this).parent().parent().data("colorpicker").livePreview};$(document).bind("mouseup",c,q),$(document).bind("mousemove",c,p)},p=function(a){return a.data.field.val(Math.max(0,Math.min(a.data.max,parseInt(a.data.val+a.pageY-a.data.y,10)))),a.data.preview&&l.apply(a.data.field.get(0),[!0]),!1},q=function(a){return l.apply(a.data.field.get(0),[!0]),a.data.el.removeClass("colorpicker_slider").find("input").focus(),$(document).unbind("mouseup",q),$(document).unbind("mousemove",p),!1},r=function(a){var b={cal:$(this).parent(),y:$(this).offset().top};b.preview=b.cal.data("colorpicker").livePreview,$(document).bind("mouseup",b,t),$(document).bind("mousemove",b,s)},s=function(a){return l.apply(a.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,a.pageY-a.data.y)))/150,10)).get(0),[a.data.preview]),!1},t=function(a){return d(a.data.cal.data("colorpicker").color,a.data.cal.get(0)),f(a.data.cal.data("colorpicker").color,a.data.cal.get(0)),$(document).unbind("mouseup",t),$(document).unbind("mousemove",s),!1},u=function(a){var b={cal:$(this).parent(),pos:$(this).offset()};b.preview=b.cal.data("colorpicker").livePreview,$(document).bind("mouseup",b,w),$(document).bind("mousemove",b,v)},v=function(a){return l.apply(a.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,a.pageY-a.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,a.pageX-a.data.pos.left))/150,10)).get(0),[a.data.preview]),!1},w=function(a){return d(a.data.cal.data("colorpicker").color,a.data.cal.get(0)),f(a.data.cal.data("colorpicker").color,a.data.cal.get(0)),$(document).unbind("mouseup",w),$(document).unbind("mousemove",v),!1},x=function(a){$(this).addClass("colorpicker_focus")},y=function(a){$(this).removeClass("colorpicker_focus")},z=function(a){var b=$(this).parent(),c=b.data("colorpicker").color;b.data("colorpicker").origColor=c,i(c,b.get(0)),b.data("colorpicker").onSubmit(c,M(c),K(c),b.data("colorpicker").el)},A=function(a){var b=$("#"+$(this).data("colorpickerId"));b.data("colorpicker").onBeforeShow.apply(this,[b.get(0)]);var c=$(this).offset(),d=D(),e=c.top+this.offsetHeight,f=c.left;return e+176>d.t+d.h&&(e-=this.offsetHeight+176),f+356>d.l+d.w&&(f-=356),b.css({left:f+"px",top:e+"px"}),0!=b.data("colorpicker").onShow.apply(this,[b.get(0)])&&b.show(),$(document).bind("mousedown",{cal:b},B),!1},B=function(a){C(a.data.cal.get(0),a.target,a.data.cal.get(0))||(0!=a.data.cal.data("colorpicker").onHide.apply(this,[a.data.cal.get(0)])&&a.data.cal.hide(),$(document).unbind("mousedown",B))},C=function(a,b,c){if(a==b)return!0;if(a.contains)return a.contains(b);if(a.compareDocumentPosition)return!!(16&a.compareDocumentPosition(b));for(var d=b.parentNode;d&&d!=c;){if(d==a)return!0;d=d.parentNode}return!1},D=function(){var a="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(a?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(a?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(a?document.documentElement.clientHeight:document.body.clientHeight)}},E=function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}},F=function(a){return{r:Math.min(255,Math.max(0,a.r)),g:Math.min(255,Math.max(0,a.g)),b:Math.min(255,Math.max(0,a.b))}},G=function(a){var b=6-a.length;if(b>0){for(var c=[],d=0;b>d;d++)c.push("0");c.push(a),a=c.join("")}return a},H=function(a){var a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16);return{r:a>>16,g:(65280&a)>>8,b:255&a}},I=function(a){return J(H(a))},J=function(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!=d?255*e/d:0,0!=b.s?a.r==d?b.h=(a.g-a.b)/e:a.g==d?b.h=2+(a.b-a.r)/e:b.h=4+(a.r-a.g)/e:b.h=-1,b.h*=60,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b},K=function(a){var b={},c=Math.round(a.h),d=Math.round(255*a.s/100),e=Math.round(255*a.b/100);if(0==d)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;360==c&&(c=0),60>c?(b.r=f,b.b=g,b.g=g+h):120>c?(b.g=f,b.b=g,b.r=f-h):180>c?(b.g=f,b.r=g,b.b=g+h):240>c?(b.b=f,b.r=g,b.g=f-h):300>c?(b.b=f,b.g=g,b.r=g+h):360>c?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}},L=function(a){var b=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];return $.each(b,function(a,c){1==c.length&&(b[a]="0"+c)}),b.join("")},M=function(a){return L(K(a))},N=function(){var a=$(this).parent(),b=a.data("colorpicker").origColor;a.data("colorpicker").color=b,d(b,a.get(0)),f(b,a.get(0)),e(b,a.get(0)),g(b,a.get(0)),h(b,a.get(0)),j(b,a.get(0))};return{init:function(a){if(a=$.extend({},c,a||{}),"string"==typeof a.color)a.color=I(a.color);else if(void 0!=a.color.r&&void 0!=a.color.g&&void 0!=a.color.b)a.color=J(a.color);else{if(void 0==a.color.h||void 0==a.color.s||void 0==a.color.b)return this;a.color=E(a.color)}return this.each(function(){if(!$(this).data("colorpickerId")){var c=$.extend({},a);c.origColor=a.color;var p="collorpicker_"+parseInt(1e3*Math.random());$(this).data("colorpickerId",p);var q=$(b).attr("id",p);c.flat?q.appendTo(this).show():q.appendTo(document.body),c.fields=q.find("input").bind("keyup",k).bind("change",l).bind("blur",m).bind("focus",n),q.find("span").bind("mousedown",o).end().find(">div.colorpicker_current_color").bind("click",N),c.selector=q.find("div.colorpicker_color").bind("mousedown",u),c.selectorIndic=c.selector.find("div div"),c.el=this,c.hue=q.find("div.colorpicker_hue div"),q.find("div.colorpicker_hue").bind("mousedown",r),c.newColor=q.find("div.colorpicker_new_color"),c.currentColor=q.find("div.colorpicker_current_color"),q.data("colorpicker",c),q.find("div.colorpicker_submit").bind("mouseenter",x).bind("mouseleave",y).bind("click",z),d(c.color,q.get(0)),e(c.color,q.get(0)),f(c.color,q.get(0)),h(c.color,q.get(0)),g(c.color,q.get(0)),i(c.color,q.get(0)),j(c.color,q.get(0)),c.flat?q.css({position:"relative",display:"block"}):$(this).bind(c.eventName,A)}})},showPicker:function(){return this.each(function(){$(this).data("colorpickerId")&&A.apply(this)})},hidePicker:function(){return this.each(function(){$(this).data("colorpickerId")&&$("#"+$(this).data("colorpickerId")).hide()})},setColor:function(a){if("string"==typeof a)a=I(a);else if(void 0!=a.r&&void 0!=a.g&&void 0!=a.b)a=J(a);else{if(void 0==a.h||void 0==a.s||void 0==a.b)return this;a=E(a)}return this.each(function(){if($(this).data("colorpickerId")){var b=$("#"+$(this).data("colorpickerId"));b.data("colorpicker").color=a,b.data("colorpicker").origColor=a,d(a,b.get(0)),e(a,b.get(0)),f(a,b.get(0)),h(a,b.get(0)),g(a,b.get(0)),i(a,b.get(0)),j(a,b.get(0))}})}}}();$.fn.extend({ColorPicker:a.init,ColorPickerHide:a.hidePicker,ColorPickerShow:a.showPicker,ColorPickerSetColor:a.setColor})}(jQuery);