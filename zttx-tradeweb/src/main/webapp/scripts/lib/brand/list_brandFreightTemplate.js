$(function(){seajs.use(["pagination","template","dialog"],function(a,b,c){b.helper("formatNumberTwo",function(a){return isNaN(a)?a:parseFloat(a).toFixed(2)}),b.helper("formatNumberThree",function(a){return isNaN(a)?a:parseFloat(a).toFixed(3)});var d=$("#isRecommendHide").val(),e=(new a({url:"/brand/freightTemplate/listData",elem:"#pagination",data:{pageSize:5,isRecommend:d},method:"post",handleData:function(a){if(a.rows&&a.rows.length>0){console.log(a);var c=b.render("diyTplTemplate",a);$("#diyTplCon").html(c)}else $("#diyTplCon").html("<div style='text-align: center;margin-top: 20px;'>暂无数据</div>");$("#diyTplCon").html(c)}}),function(a,b,c){var d=a.parent().data("id");$.ajax({url:b,data:{templateId:d},method:"post",dataType:"json",success:function(a){return c&&$.isFunction(c)?void c(a):void(a.code!=zttx.SUCCESS?remind("error",a.message):window.location.reload())}})});$("#fareTplList").on("click",".js-add-default",function(){e($(this),"/brand/freightTemplate/setDefault")}),$("#fareTplList").on("click",".js-remove-default",function(){e($(this),"/brand/freightTemplate/cancelDefault")}),$("#fareTplList").on("click",".js-delete-fare",function(){var a=$(this);confirmDialog({title:"提示",content:"是否确认删除此模板？"},function(){e(a,"/brand/freightTemplate/delete")})}),$("#fareTplList").on("click",".js-copy-fare",function(){var a=$(this).parents(".fare-tpl-hd").find(".fl strong").text();getCharLength(a)>50?remind("error","模版名称超过50个字符，无法复制"):e($(this),"/brand/freightTemplate/copy")}),$("#fareTplList").on("click",".js-use-fare",function(){var a=$("#productIds").val();e($(this),"/brand/freightTemplate/apply?productIds="+a,function(a){if(a.code!=zttx.SUCCESS)remind("error",a.message);else{new c({content:$("#useThisTpl").html(),hasMask:!1,width:200}).show()}})})})});