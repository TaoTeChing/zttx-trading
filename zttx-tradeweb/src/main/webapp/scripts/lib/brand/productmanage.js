var productmanage={init:function(){this.tabSmenu()},tabSmenu:function(){var a=$("div.jstabsmenu_t ul li");a.click(function(){$(this).addClass("selected").siblings().removeClass("selected");var b=a.index(this);$("div.tabsbox_t > div").eq(b).show().siblings().hide()})}},addNew={init:function(){this.tabSmenu(),this.TitclickHS(),this.seajsuseData(),this.seajsUM(),this.seajsuseMM(),this.seajsvalidator(),this.percentage(),this.fareTplTabs()},tabSmenu:function(){var a=$("div.jstabsmenu_t ul li");a.click(function(){$(this).addClass("selected").siblings().removeClass("selected");var b=a.index(this);$("div.tabsbox_t > div").eq(b).show().siblings().hide()})},TitclickHS:function(){$(".mininfo").on("click",".title",function(){var a=$(".TitclickHS");a.toggle(),a.is(":hidden")&&$(this).find(".iconfont").html("&#xe606;"),a.is(":visible")&&$(this).find(".iconfont").html("&#xe605;")}),$(".mininfo2").on("click",".title",function(){var a=$(".product-nature");a.toggle(),a.is(":hidden")&&$(this).find(".iconfont").html("&#xe606;"),a.is(":visible")&&$(this).find(".iconfont").html("&#xe605;")})},seajsuseData:function(){seajs.use(["my97DatePicker"],function(){$("#start-cal,#end-cal").addClass("hasDatepicker"),$("#start-cal2,#end-cal2").addClass("hasDatepicker"),$("#start-cal").on("focus",function(){WdatePicker({maxDate:"#F{$dp.$D('end-cal')}"})}),$("#end-cal").on("focus",function(){var a=+new Date($("#start-cal").val()),b=+new Date;a>=b?WdatePicker({minDate:"#F{$dp.$D('start-cal')}"}):WdatePicker({minDate:"%y-%M-%d"})}),$("#start-cal2").on("focus",function(){"undefined"!=typeof flag?""==$("#start-cal").val?WdatePicker({maxDate:"#F{$dp.$D('end-cal2')}",minDate:"%y-%M-%d"}):WdatePicker({maxDate:"#F{$dp.$D('end-cal2')}",minDate:"#F{$dp.$D('start-cal')}"}):WdatePicker({maxDate:"#F{$dp.$D('end-cal2')}"})}),$("#end-cal2").on("focus",function(){WdatePicker({minDate:"#F{$dp.$D('start-cal2')}"})})})},seajsuseMM:function(){seajs.use(["my97DatePicker"],function(){$("#datatimemm").addClass("hasDatepicker"),$("#datatimemm").on("click",function(){WdatePicker({dateFmt:"yyyy-MM-dd HH:mm:ss",minDate:"%y-%M-%d {%H+1}:00:00"})})})},seajsUM:function(){seajs.use(["umeditor","umeditor_config","umdeitor_style"],function(){UM.getEditor("myEditor",{initialFrameWidth:678,initialFrameHeight:500})})},seajsvalidator:function(){seajs.use(["validator","widget"],function(a,b){function c(){var a=$(".chengdanwul:checked").val();d.removeItem("select[name=freTemplateId]"),"1"==a?($("#fareSwitchItem").show(),$(".fare-change").show(),d.addItem({element:"select[name=freTemplateId]",required:!0,errormessageRequired:"请选择运费模版"})):"2"==a&&($("#fareSwitchItem").hide(),$(".fare-change").hide())}b.autoRenderAll();var d=a.query(".productadd-form");d.set("autoSubmit",!1),d.on("formValidated",function(a){function b(){$("#productNo").prop("disabled",!1),$(".coloreditul .colorchk").prop("disabled",!1),$(".coloreditul .getext").prop("disabled",!1),a||addNew_formSubmit();var b=$(".productadd-form").serialize();"0"==g?($("#productSave").attr({disabled:"true"}).css({backgroundColor:"#ccc"}),dialogLoading(function(a){$.ajax({url:"/brand/product/save",type:"post",data:b,dataType:"json",async:!0,success:function(b,c){$("#productSave").attr("disabled",!1).css({backgroundColor:"#FF8800"}),a.hide(),zttx.SUCCESS==b.code?setTimeout(function(){window.location.href="/brand/product/success/"+b.object},2e3):zttx.VALIDERR==b.code?setErrMsg(".productadd-form",b.rows):remind("error",b.message)},error:function(b){$("#productSave").attr("disabled",!1).css({backgroundColor:"#FF8800"}),a.hide(),remind("error",b.message)}})},"添加产品中...请稍候")):($("#productSave").attr({disabled:"true"}).css({backgroundColor:"#ccc"}),$.ajax({url:"/brand/product/preview/validator",type:"post",data:b,dataType:"json",async:!0,success:function(a,c){$("#productSave").attr("disabled",!1).css({backgroundColor:"#FF8800"}),zttx.SUCCESS==a.code?(createFormHiddenFn(b,"#viewForm",{name:"productMark",selector:"#myEditor"}),$("#viewForm").submit(),$("#viewPanel").animate({left:0},618),$("#viewPanel #closeView").click(function(){$("#viewPanel").animate({left:-970},618)})):zttx.VALIDERR==a.code?setErrMsg(".productadd-form",a.rows):remind("error",a.message)},error:function(a){$("#productSave").attr("disabled",!1).css({backgroundColor:"#FF8800"}),remind("error",a.message)}}))}if(!a){for(var c=cateTreeObj.getCheckedNodes(!0),d=new Array,e=0,f=0;e<c.length;e++)void 0!=c[e].id&&(d[f]=c[e].id,f++);d.length>0&&$("#cateIds").val(d);var g=$.trim($("#opType").val());if($("#proSaleAttr").length>0){var h=!0,i=$("#samplePrice").val(),j=0,k=0;if($("#selectmix tr").each(function(a,b){var c=parseFloat($(this).find("input[name=attr_combo_price]").val()),d=parseFloat($(this).find("input[name=attr_combo_direct_price]").val()),e=parseFloat($(this).find("input[name=attr_combo_credit_price]").val()),f=$(this);c&&0!=c||(h=!1,$(this).find("input[name=attr_combo_price]").addClass("input-error"),0==k&&(remind("error","吊牌价不能为空或0",1600,function(){f.find("input[name=attr_combo_price].input-error").focus()}),tiggerSxFlag!==!0&&(k=2))),(!d||0==d||d>c)&&(h=!1,$(this).find("input[name=attr_combo_direct_price]").addClass("input-error"),0==k&&(remind("error","直供价、授信价不能为0，且必须小于吊牌价",1600,function(){f.find("input[name=attr_combo_direct_price].input-error").focus()}),tiggerSxFlag!==!0&&(k=2))),1==tiggerSxFlag&&(!e||0==e||e>c)&&(h=!1,$(this).find("input[name=attr_combo_credit_price]").addClass("input-error"),0==k&&(remind("error","直供价、授信价不能为0，且必须小于吊牌价",1600,function(){f.find("input[name=attr_combo_credit_price].input-error").focus()}),k=2)),0==a?j=d:d>j&&(j=d)}),!h)return!1;if($("#selectmix .maintbody tr").length<=0){var l=$(".mininfo").offset().top;return remind("error","请选择至少一组产品销售属性",1600,function(){$(document).scrollTop(l)}),!1}if(1==$("input[name=isSample]").prop("checked")&&""==i)return $("#samplePrice").addClass("input-error").focus(),!1;j>i&&1==$("input[name=isSample]").prop("checked")?confirmDialog("您设置的拿样价，低于现款现货的价格，确认吗？",function(){b()}):b()}else b()}}),$("input[name='beginType']").change(function(){beginTypeValidated(d)}),beginTypeValidated(d),a.addRule("NumEn",/^[a-zA-Z0-9]{1,30}?$/,"请输入1-30位英文或数字组合的产品货号"),a.addRule("NumberInt",/^[0-9]{1,8}?$/,"必须为整数且不超过8位"),a.addRule("productTitle",function(a){var b=a.element.val(),c=getCharLength(b);return 1>c||c>120?!1:!0},"产品标题必须在1-120个字符内"),a.addRule("productChinese",function(a){var b=a.element.val();return!/.*[\u4e00-\u9fa5]+.*$/.test(b)},"货号不能包含中文"),a.addRule("productNo",function(a){var b=a.element.val(),c=getCharLength(b);return 1>c||c>32?!1:!0},"产品货号必须在1-32个字符内"),a.addRule("weightInput",function(a){var b=a.element.val(),c=/^(([1-9]\d{0,9})|0)(\.\d{1,3})?$/;return c.test(b)},"请输入正确的{{display}}"),a.addRule("lengthTW",function(a){var b=a.element.val(),c=getCharLength(b);return 1>c||c>32?!1:!0},"长度必须在1-32个字符内"),a.addRule("checkProductNo",function(a,b){var c=a.element,e=d.getItem(c),f=$.trim($("#ppchoice").val()),g=e.find("input[type=text]").val(),h=$("input[name=refrenceId]").val();e.addClass("ui-form-item-loading").find(".ui-form-explain").text("货号查询中");var i=$("#copy").val();$.ajax({url:"/brand/product/isSameProductNo",method:"post",dataType:"json",data:{brandsId:f,productNo:g,productId:h,copy:i,csrfToken:$("input[name=csrfToken]").val()},success:function(a){e.removeClass("ui-form-item-loading"),e.removeClass("ui-form-item-success"),a.code==zttx.SUCCESS?1==a.object?b(!1,"货号重复，请修改"):(e.addClass("ui-form-item-success"),b(!0,"货号可以使用")):b(!1,a.message)},error:function(a,c,d){e.removeClass("ui-form-item-loading"),e.removeClass("ui-form-item-success"),b(!1,"查询失败")}})}),d.addItem({element:".articleno",required:!0,rule:"productNo checkProductNo",errormessageRequired:"请输入产品货号"}).addItem({element:".bulkclass",required:!0,rule:"NumberInt",errormessageRequired:"请输入起批量"}).addItem({element:"#groomCheck",required:!0,rule:"minlength{min:1}",errormessageRequired:"推荐窗口数已满，不能设置该产品为推荐产品"}).addItem({element:".ppchoice",required:!0,rule:"minlength{min:1}",errormessageRequired:"请选择品牌"}).addItem({element:"#unitNo",required:!0,rule:"minlength{min:1}",errormessageRequired:"请选择产品单位"}).addItem({element:".owner",required:!0,rule:"minlength{min:1}",errormessageRequired:"请选择产品类型"}).addItem({element:'[id="myEditor"]',required:!0,rule:"minlength{min:1}",errormessageRequired:"请填写产品描述"}).addItem({element:"#attrError",required:!0}).addItem({element:'[id="imgValidate"]',required:!0,rule:"minlength{min:1}",errormessageRequired:"请上传产品主图"}).addItem({element:".productitle",required:!0,rule:"productTitle",errormessageRequired:"请输入产品标题"}).addItem({element:".chengdanwul",required:!0,rule:"minlength{min:1}",errormessageRequired:"请选择运费物流方式"}).addItem({element:".samplePrice",required:!1,rule:"max{max: 100000000}",errormessageRequired:"请输入拿样价格"}).addItem({element:"#myEditor",required:!0}).addItem({element:"input[name=productWeight]",required:!0,rule:"weightInput",display:"产品包装后的重量"}),c(),$(".samplePrice").off("keyup change").isPrice(!0),$(".chengdanwul").change(function(a){c()})})},percentage:function(){function a(){var a=$(".notnull").length;$(".comple").animate({width:a/b*c},function(){var c=a/b*100,d=parseInt(c);$(".comple").text(d+"%")})}var b=$(".to-omple").length,c=$(".jindutiao").width();$(".to-omple").each(function(){var a=$(this).val();""!=a&&$(this).addClass("notnull")}),a(),$(document).on("change",".to-omple",function(b){var c=$(this);""!=c.val()?c.addClass("notnull"):c.removeClass("notnull"),$("textarea#myEditor").removeClass("notnull"),a()}),$(document).on("input propertychange keydown keyup",".edui-body-container",function(){var b=UM.getEditor("myEditor").getContent();""!==b?$(".edui-body-container.to-omple").addClass("notnull"):$(".edui-body-container.to-omple").removeClass("notnull"),$("textarea#myEditor").removeClass("notnull"),a()})},selectgroup:function(){seajs.use(["dialog"],function(a){var b=new a({trigger:".js-selectgroup-pic",effect:"fade",hasMask:!0,content:$(".js-selectgroup-box"),width:700});$(document).on("click",".ui-dialog-close",function(){b.hide()}),$(".js-Color-Url").on("click",".item",function(){var a=$("#fileInputId").val(),c=$(this).find("img").data("icon"),d=$("#show_color_img input[name='colorImgDomainName']").val();setColorImgUrlData(a,c,d),b.hide()}),$(".js-selectgroup-box").on("click",".js-selectgroup-cansole",function(){b.hide()})})},fareTplTabs:function(){$(".fare-change").on("click",".fare-change-tabs li.fare-item",function(){var a=$(this).index();$(".fare-change-tabs li").removeClass("selected"),$(this).addClass("selected"),$(".fare-change-tabs .fare-tabs-con").hide().eq(a).show()})}},productmanagelist={init:function(){},tabSmenu:function(){var a=$("div.jstabsmenu_t ul li");a.click(function(){$(this).addClass("selected").siblings().removeClass("selected");var b=a.index(this);$("div.tabsbox_t > div").eq(b).show().siblings().hide()})},seajsTip:function(){seajs.use(["popup"],function(a){var b=new a({trigger:".js_tip_triggerjiage",element:".js-tip-jiage",align:{baseXY:[-55,22]}});$(".js-tip-jiage").on("click",".js-savebtn",function(){$.isFunction(jiageClick)&&jiageClick(b)}),$(".js-tip-jiage").on("click",".js-cancelbtn",function(){b.hide()});var c=new a({trigger:".js_tip_triggerkucun",element:".js-tip-kucun",align:{baseXY:[-55,22]}});$(".js-tip-kucun").on("click",".js-savebtn",function(){$.isFunction(kucunClick)&&kucunClick(c)}),$(".js-tip-kucun").on("click",".js-cancelbtn",function(){c.hide()})})},changeN:function(){}},productmanageclass={init:function(){this.tabSmenu(),this.movEdit(),this.canmovesee(),this.addpropic(),this.comparePrice()},setCatalogFn:function(a){},tabSmenu:function(){var a=$("div.jstabsmenu_t ul li"),b=!0;a.click(function(){var c=$(this).index();1==c&&b&&(b=!1),$(this).addClass("selected").siblings().removeClass("selected");var c=a.index(this);$("div.tabsbox_t > div").eq(c).show().siblings().hide()})},seajsZtree:function(){seajs.use(["$","ztree"],function($,a){var b={},c=[{name:"父节点1 - 展开",open:!0,children:[{name:"父节点11 - 折叠",children:[{name:"叶子节点111"},{name:"叶子节点112"},{name:"叶子节点113"},{name:"叶子节点114"}]},{name:"父节点12 - 折叠",children:[{name:"叶子节点121"},{name:"叶子节点122"},{name:"叶子节点123"},{name:"叶子节点124"}]},{name:"父节点13 - 没有子节点",isParent:!0}]},{name:"父节点2 - 折叠",children:[{name:"父节点21 - 展开",open:!0,children:[{name:"叶子节点211"},{name:"叶子节点212"},{name:"叶子节点213"},{name:"叶子节点214"}]},{name:"父节点22 - 折叠",children:[{name:"叶子节点221"},{name:"叶子节点222"},{name:"叶子节点223"},{name:"叶子节点224"}]},{name:"父节点23 - 折叠",children:[{name:"叶子节点231"},{name:"叶子节点232"},{name:"叶子节点233"},{name:"叶子节点234"}]}]},{name:"父节点3 - 没有子节点",isParent:!0}];$.fn.zTree.init($("#tree"),b,c)})},movEdit:function(){function a(){$(document).on("click",".newclass",function(){$(this).parent().find(".tablearrow tbody").hasClass("tbody")&&($(".tablearrow").find("tbody:last").after('<tbody><tr class="maintree"><input type="hidden" name="cateLevelAry" value="1"/><input type="hidden" name="cateIconAry" id="cateIconAry" value=""/><input type="hidden" name="refrenceIdAry" id="refrenceIdAry" value=""/><td class="td_0"><input type="checkbox"class="ui-checkbox newclasschk mainclasschk" name="chkRefrenceId"/></td><td class="td_1"><i id="trplus" class="main_iconsguan"></i></td><td class="td_2"><input type="text"class="newclasstext"value="" name="cateNameAry"/></td><td class="td_3"><span class="addsubclass"><i class="iconfont">&#xe615;</i>添加图片</span></td><td class="td_4"><div class="movebox"><span class="movetop mainmovetop" title="顶部"></span><span class="moveup mainmoveup" title="上移"></span><span class="movedown mainmovedown" title="下移"></span><span class="movebottom mainmovebottom" title="底部"></span></div></td><td class="td_5"><span class="delete">删除</span></td></tr><tr class="subtree addsubtree"><td class="td_0"></td><td class="td_1"></td><td class="td_2"><div class="sub_zhe fl"></div><div class="js_add_sub">添加子分类</div></td><td class="td_3"></td><td class="td_4"></td><td class="td_5"></td></tr></tbody>'),c()),$(this).parent().find(".tablearrow tbody").hasClass("tbody")||($(".tablearrow").append('<tbody class="tbody"><tr class="maintree"><input type="hidden" name="cateLevelAry" value="1"/><input type="hidden" name="cateIconAry" id="cateIconAry" value=""/><input type="hidden" name="refrenceIdAry" id="refrenceIdAry" value=""/><td class="td_0"><input type="checkbox" class="ui-checkbox newclasschk mainclasschk" name="chkRefrenceId"/></td><td class="td_1"><i id="trplus" class="main_iconsguan"></i></td><td class="td_2"><input type="text" class="newclasstext" value="" name="cateNameAry"/></td><td class="td_3"><span class="addsubclass"><i class="iconfont">&#xe615;</i>添加图片</span></td><td class="td_4"><div class="movebox"><span class="movetop mainmovetop" title="顶部"></span><span class="moveup mainmoveup" title="上移"></span><span class="movedown mainmovedown" title="下移"></span><span class="movebottom mainmovebottom" title="底部"></span></div></td><td class="td_5"><span class="delete">删除</span></td></tr><tr class="subtree addsubtree"><td class="td_0"></td><td class="td_1"></td><td class="td_2"><div class="sub_zhe fl"></div><div class="js_add_sub">添加子分类</div></td><td class="td_3"></td><td class="td_4"></td><td class="td_5"></td></tr></tbody>'),c()),g()})}function b(){$(document).on("click",".addsubtree",function(){$(this).parent().find("tr:last").before('<tr class="subtree subtreemove"><input type="hidden" name="cateLevelAry" value="2"/><input type="hidden" name="cateIconAry" id="cateIconAry" value=""/><input type="hidden" name="refrenceIdAry" id="refrenceIdAry" value=""/><td class="td_0"><input type="checkbox"class="ui-input newclasschk"></td><td class="td_1"></td><td class="td_2"><div class="sub_zhe inline-block fl"></div><input type="text"class="newclasstext"value="" name="cateNameAry"/></td><td class="td_3"><span class="addsubclass"><i class="iconfont">&#xe615;</i>添加图片</span></td><td class="td_4"><div class="movebox"><span class="moveup submoveup" title="上移"></span><span class="movedown submovedown" title="下移"></span></div></td><td class="td_5"><span class="delete">删除</span></td></tr>'),d(),g()})}function c(){1==$(".table tbody").children("tr.maintree").size()&&$(".table tbody").find("tr.maintree").removeClass("subnormal").removeClass("sublast").removeClass("subfirst").addClass("subonly"),2==$(".table tbody").children("tr.maintree").size()&&($(".table tbody tr.maintree:eq(0)").removeClass("subonly").removeClass("subnormal").removeClass("sublast").addClass("subfirst"),$(".table tbody tr.maintree:eq(1)").removeClass("subonly").removeClass("subnormal").removeClass("subfirst").addClass("sublast")),$(".table tbody").children("tr.maintree").size()>=3&&($(".table tbody tr.maintree:gt(0)").removeClass("subonly").removeClass("subfirst").removeClass("sublast").addClass("subnormal"),$(".table tbody tr.maintree:first").removeClass("subonly").removeClass("subnormal").removeClass("sublast").addClass("subfirst"),$(".table tbody tr.maintree:last").removeClass("subonly").removeClass("subnormal").removeClass("subfirst").addClass("sublast"))}function d(){$(".table").find("tbody").each(function(){1==$(this).children("tr.subtreemove").size()&&$(this).find("tr.subtreemove").removeClass("subnormal").removeClass("sublast").removeClass("subfirst").addClass("subonly"),2==$(this).children("tr.subtreemove").size()&&($(this).find("tr.subtreemove:eq(0)").removeClass("subonly").removeClass("subnormal").removeClass("sublast").addClass("subfirst"),$(this).find("tr.subtreemove:eq(1)").removeClass("subonly").removeClass("subnormal").removeClass("subfirst").addClass("sublast")),$(this).children("tr.subtreemove").size()>=3&&($(this).find("tr.subtreemove:gt(0)").removeClass("subonly").removeClass("subfirst").removeClass("sublast").addClass("subnormal"),$(this).find("tr.subtreemove:first").removeClass("subonly").removeClass("subnormal").removeClass("sublast").addClass("subfirst"),$(this).find("tr.subtreemove:last").removeClass("subonly").removeClass("subnormal").removeClass("subfirst").addClass("sublast"))})}function e(){$(document).on("click","span.mainmoveup",function(){var a=$(this).parent().parent().parent().parent(),b=$(this).parent().parent().parent().parent().prev();return $(this).parent().parent().parent().hasClass("subonly")||$(this).parent().parent().parent().hasClass("subfirst")?!1:($(b).before(a),void c())}),$(document).on("click","span.mainmovedown",function(){var a=$(this).parent().parent().parent().parent(),b=$(this).parent().parent().parent().parent().next();return $(this).parent().parent().parent().parent().hasClass("sublast")||$(this).parent().parent().parent().parent().hasClass("subonly")?!1:($(b).after(a),void c())}),$(document).on("click","span.mainmovetop",function(){var a=$(this).parent().parent().parent().parent(),b=$(this).parent().parent().parent().parent().parent().find("tbody:first");return $(this).parent().parent().parent().hasClass("subonly")||$(this).parent().parent().parent().hasClass("subfirst")?!1:($(b).before(a),void c())}),$(document).on("click","span.mainmovebottom",function(){var a=$(this).parent().parent().parent().parent(),b=$(this).parent().parent().parent().parent().parent().find("tbody:last");return $(this).parent().parent().parent().hasClass("sublast")||$(this).parent().parent().parent().hasClass("subonly")?!1:($(b).after(a),void c())})}function f(){$(document).on("click","span.submoveup",function(){var a=$(this).parent().parent().parent(),b=$(this).parent().parent().parent().prev();return a.hasClass("subonly")||a.hasClass("subfirst")?!1:($(b).before(a),void d())}),$(document).on("click","span.submovedown",function(){var a=$(this).parent().parent().parent(),b=$(this).parent().parent().parent().next();return a.hasClass("sublast")||a.hasClass("subonly")?!1:($(b).after(a),void d())})}function g(){$(".table tbody").keyup(function(){$("#saveclasses").addClass("saveclass")})}a(),b(),c(),d(),e(),f(),$("#trplus").each(function(){var a=$(this).parent().parent().nextAll();$(a).is(":visible")?$(this).addClass("main_iconsguan"):$(this).removeClass().addClass("main_iconskai")}),$(document).on("click","#trplus",function(){var a=$(this).parent().parent().nextAll();$(a).toggle(),$(a).is(":visible")?$(this).addClass("main_iconsguan"):$(this).removeClass().addClass("main_iconskai")}),$(document).on("click",".look",function(){var a=$(this).parent().parent().nextAll();$(a).toggle(),$(a).is(":visible")?$(this).parent().parent().find("#trplus").addClass("main_iconsguan"):$(this).parent().parent().find("#trplus").removeClass().addClass("main_iconskai")}),$(document).on("click",".subtree td .delete",function(){$(this).parent().parent().remove(),$("#saveclasses").addClass("saveclass"),d()}),$(document).on("click",".maintree td .delete",function(){var a=$(this).parent().parent().parent();a.remove(),$("#saveclasses").addClass("saveclass")}),g(),$(document).on("click",".chkALL",function(){$("input[type=checkbox].newclasschk").prop("checked",this.checked)}),$(document).on("click",".mainclasschk",function(){$(this).parent().parent().parent().find("input[type=checkbox].newclasschk").prop("checked",this.checked)}),$(document).on("click",".setdelall",function(){$("[name=chkRefrenceId]:checkbox:checked").each(function(){if($(this).parent().parent().hasClass("maintree")){if(!window.confirm("当前内容包含一级分类，删除一级分类会删除相应的子分类，确认删除吗?"))return!1;$(this).parent().parent().parent().remove()}else $(this).parent().parent().remove()})});var h='<div class="js_linshi_box" style="position: relative"><div style="background: #fef4e8;position: absolute;padding: 4px 5px; left: 195px;top:-27px"><i class="inline-block" style="width:16px;height:16px;background: url(../../images/dealer/icons-home.png) no-repeat 0 -336px; vertical-align: -4px;margin-right: 5px"></i>分类名称不能为空</div></div>';$(document).on("click",".saveclass",function(){var a=!0;$(".newclasstext").each(function(){var b=$(this);$(this).parent().find(".js_linshi_box").remove(),""==b.val()?($(this).parent().append(h),a=!1):$(this).parent().find(".js_linshi_box").remove()}),a&&saveCatalog()}),$(document).on("blur",".newclasstext",function(){var a=$(this);$(this).parent().find(".js_linshi_box").remove(),""==a.val()?$(this).parent().append(h):$(this).parent().find(".js_linshi_box").remove()}).on("keyup",".newclasstext",function(){var a=$(this);$(this).parent().find(".js_linshi_box").remove(),""==a.val()?$(this).parent().append(h):$(this).parent().find(".js_linshi_box").remove()})},canmovesee:function(){$(".tbale tbody tr").hover(function(){})},addpropic:function(){var a='<div class="addProPicbox" style="position:relative;z-index: 9"><div class="addProPic"><h4>请选择分类图片上传</h4><div><div class="inline-block"><div class="file_wrap"><a href="javascript:;" class="replace_text simple_button">上传图片</a><input type="file" value="文件上传" name="photo" class="input_file" id="uploadFile" /></div></div></div><a href="javascript:;" class="ui_button ui_button_sgray addpropicsure">确定</a><a href="javascript:;" class="ui_button ui_button_sgray addpropicansle">取消</a></div>';$(document).on("click",".addsubclass",function(){$(this).parents("table").find(".addProPicbox").remove(),$(this).parent().append(a)}),$(document).on("click",".addpropicsure",function(){ajaxFileUpLoad($(this),"uploadFile")}),$(document).on("click",".addpropicansle",function(){$(".addProPicbox").remove()}),$(document).on("click",".haspic-del",function(){$(this).parents("tr").find("#cateIconAry").val("");var a='<span class="addsubclass"><i class="iconfont">&#xe615;</i>添加图片</span>';$(this).parent().parent().html(a)}),$(document).on("click",".haspic-edit",function(){$(this).parents("table").find(".addProPicbox").remove(),$(this).parent().parent().append(a)}),$(document).on("mouseenter",".haspic-edit",function(){$(this).parent().parent().find(".piclook").show()}),$(document).on("mouseout",".haspic-edit",function(){$(this).parent().parent().find(".piclook").hide()})},jstoclass:function(){var a=this;seajs.use(["popup"],function(b){new b({trigger:".js-sel-toclass",element:".js-toclass-showbox",align:{baseXY:[-25,30]}}),new b({trigger:".js-addclass-triggerbtn",element:".js-addclass-showbox",align:{baseXY:[-25,25]}}).after("show",function(){a.setCatalogFn(this.activeTrigger)})})},addclassHover:function(){},comparePrice:function(){$(".short-width").blur(function(){var a=parseFloat($(".short-width").eq(0).val()),b=parseFloat($(".short-width").eq(1).val());a>b&&($(".short-width").eq(0).val(b),$(".short-width").eq(1).val(a))})}},selectcate={init:function(){this.handleCategory(),this.selectcate()},handleCategory:function(){if(0!=$("#select_category").size()){$.each(_dealList,function(a,b){var c='<li id="'+b.dealNo+'" class="item" name="'+a+'"><span>'+b.dealName+'</span><i class="iconfont"></i></li>';$("#select_category .select_inner").append(c)}),$("#select_category .select_inner").on("click",".item",function(){$("#selectadd").val(0),renderSelect("#selectadd"),$("#select_category .item").removeClass("current");var a=parseFloat($(this).attr("name"));$(this).addClass("current"),$("#select_class .select_inner").empty(),$("#select_product .select_inner").empty(),$.each(_dealList[a].children,function(a,b){var c='<li id="'+b.dealNo+'" class="item" name="'+a+'"><span>'+b.dealName+'</span><i class="iconfont"></i></li>';$("#select_class .select_inner").append(c)})}),$("#select_class").on("click",".item",function(){var a=$(this).attr("id");$("#select_class .item").removeClass("current"),$(this).addClass("current"),$("#select_product .select_inner").empty();var b='<li class="item" data-dealno='+a+"><span>"+$(this).find("span").html()+"</span></li>";$("#select_product .select_inner").append(b)})}},createItem:function(a,b){var c=[];return b=b?b:"choose",$.each(a,function(a,d){"choose"==b?c.push("<li data-dealno='"+d.dealNo+"' data-id="+d.id+" id='item_"+d.id+"' class='item'><span>"+d.item+"</span><i class='iconfont'>&#xe60f;</i></li>"):"close"==b&&c.push("<li data-dealno='"+d.dealNo+"' data-id="+d.id+" class='item'><span>"+d.item+"</span><i class='iconfont close_icon'>&#xe602;</i></li>")}),$(c.join(""))},selectcate:function(){$(".select_category").on("click",".item",function(){var a=$(this).html();$(".selectcatemain").html(a),$(".selectcatesub").html(""),$(".selectcateproduct").html("")}),$(".select_class").on("click",".item",function(){var a=$(this).html();$(".selectcatesub").html(a),$(".selectcateproduct").html("")})}};